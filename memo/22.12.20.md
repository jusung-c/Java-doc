## CompositePattern 실습 - 파일과 폴더

![IMG_578C4FC9C1EC1.jpeg](assets/IMG_578C4FC9C1EC-1.jpeg)

파일과 폴더의 공통점을 FileComponent로 뽑아내서 인터페이스 또는 추상클래스로 만든 후 폴어와 파일이 상속받도록 했다.

폴더는 FileComponenet를 상속받고 있지만 소유할 수도 있다. FileComponent는 인터페이스이거나 추상클래스이므로 인스턴스가 될 수 없는데 소유할 수 있다고 했으므로 FileComponent를 상속받은 폴더나 파일을 소유할 수 있다는 뜻이다.

#### FileComponent - Node

```java
public abstract class Node {
    private String name;

    public Node(String name) {
        this.name = name;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public abstract long getSize();
    public abstract boolean isFolder();
}

```

#### File

```java
public class File extends Node{
    private long size;

    public File(String name, long size) {
        super(name);
        this.size = size;
    }

    @Override
    public long getSize() {
        return this.size;
    }

    @Override
    public boolean isFolder() {
        return false;
    }
}

```

#### Folder

```java
public class Folder extends Node {
    private List<Node> nodes;

    public Folder(String name) {
        super(name);
        nodes = new ArrayList<>();
    }

    public void add(File file) {
        nodes.add(file);
    }

    public void add(Folder folder) {
        nodes.add(folder);
    }

    @Override
    public long getSize() {
        long total = 0;
        for (int i = 0; i < nodes.size(); i++) {
            total += nodes.get(i).getSize();
        }
        return total;
    }

    @Override
    public boolean isFolder() {
        return true;
    }
}

```

#### main클래스

```java
public static void main(String[] args) {
        File f1 = new File("file1", 10L);
        File f2 = new File("file2", 20L);
        File f3 = new File("file3", 30L);


        Folder folder1 = new Folder("folder1");
        Folder folder2 = new Folder("folder2");

        folder1.add(f1);
        folder1.add(folder2);

        folder2.add(f2);
        folder2.add(f3);

        System.out.println(folder1.getSize());

    }
```

[결과]

60

### DecoratorPattern 실습 - ShapeDecorator![IMG_95D65F73A3801.jpeg](assets/IMG_95D65F73A380-1.jpeg)


Shape

```java
public abstract class Shape {
    public abstract void draw();
}
```


Circle

```java
public class Circle extends Shape {
    @Override
    public void draw() {
        System.out.println("Shape: Circle");
    }
}
```


Rectangle

```java
public class Rectangle extends Shape {
    @Override
    public void draw() {
        System.out.println("Shape: Rectangle");
    }
}
```


ShapeDecorator

```java
public abstract class ShapeDecorator extends Shape {
    protected Shape decoratorShape;

    public ShapeDecorator(Shape decoratorShape) {
        this.decoratorShape = decoratorShape;
    }

    @Override
    public void draw() {
        decoratorShape.draw();
    }
}
```


RedShapeDecorator

```java
public class RedShapeDecorator extends ShapeDecorator {

    public RedShapeDecorator(Shape decoratorShape) {
        super(decoratorShape);
    }

    @Override
    public void draw() {
        setRedBorder(decoratorShape);
    }

    private void setRedBorder(Shape decoratedShape) {
        System.out.println("Red ============ Start");
        decoratorShape.draw();
        System.out.println("Red ============ Start");
    }
}
```


GreenShapeDecorator

```java
public class GreenShapeDecorator extends ShapeDecorator {

    public GreenShapeDecorator(Shape decoratorShape) {
        super(decoratorShape);
    }

    @Override
    public void draw() {
        setRedBorder(decoratorShape);
    }

    private void setRedBorder(Shape decoratedShape) {
        System.out.println("Green ============ Start");
        decoratorShape.draw();
        System.out.println("Green ============ Start");
    }
}
```


main

```java
public static void main(String[] args) {
        Circle c = new Circle();

        RedShapeDecorator redShapeDecorator = new RedShapeDecorator(c);

        GreenShapeDecorator greenShapeDecorator = new GreenShapeDecorator(redShapeDecorator);

        // greenShapeDecorator.draw();

        Shape shape = new GreenShapeDecorator(new RedShapeDecorator(new Rectangle()));

    }
```


[결과]

```
Green ============ Start
Red ============ Start
Shape: Circle
Red ============ Start
Green ============ Start
```



전의 예제 InputStream와 비교해보면 Shape가 InputStream(추상클래스) 역할, Rectangle, Circle이 FileInputStream 역할, RedShapeDecorator, GreenShapeDecorator이 DataInputStream 역할을 한다.

```java
InputStream in = new DataInputStream(new FileInputStream("a.txt"));
```
